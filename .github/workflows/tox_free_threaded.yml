name: tox_free_threaded
on:  # [push, pull_request]
  push:
    paths:
      - '.github/workflows/tox_free_threaded.yml'
      - 'tox.ini'
  pull_request:
    paths:
      - '.github/workflows/tox_free_threaded.yml'
      - 'tox.ini'
  workflow_dispatch:
jobs:
  tox-jobs:
    strategy:
      fail-fast: false
      matrix:
        job: [lint, docs-lint, pycodestyle]
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v5
      - uses: actions/setup-python@v6
        with:
          python-version: 3.14t
          allow-prereleases: true
          # cache: 'pip'  # Only use if there are requirements.txt files
      - run: pip install --upgrade pip
      - run: pip install tox
      - run: tox -e ${{ matrix.job }}

  tox:
    strategy:
      fail-fast: false
      # max-parallel: 4
      matrix:
        os: [ubuntu-latest]  # [macos-latest, ubuntu-latest, windows-latest]
        python: ['3.14', '3.14t']
    runs-on: ${{ matrix.os }}
    steps:
      - uses: actions/checkout@v5
      - uses: actions/setup-python@v6
        with:
          python-version: ${{ matrix.python }}
          allow-prereleases: true
          # cache: 'pip'
          #python-version: |
          #  3.10
          #  3.11
          #  3.12
          #  3.13
            # 3.14
      - run: python3 --version && python --version
      - run: pip install --upgrade pip
      - run: pip install tox
      - run: tox -e py
      #- run: tox -e py310
      #- run: tox -e py311
      #- run: tox -e py312
      #- run: tox -e py313
      #- run: tox -e py314
      #- run: tox -e ALL
